## 问题分析

**根本原因**：`setToken` 函数虽然更新了 store，但 Zustand 的状态更新可能是引用比较，导致 React 没有检测到变化。

**问题**：
1. `setToken` 函数内部使用了 `set` 的函数形式
2. 返回的是 `{ tokens: newTokens }`，但 `newTokens` 是深拷贝后的对象
3. 组件订阅的是 `state => state.actions`，但 actions 函数本身没有变化

## 修复方案

在 `setToken` 中添加 `forceUpdate` 机制，通过修改一个假的版本号来触发组件重新渲染：

```typescript
// 在 StoreState 中添加
ui: {
  // ... 现有字段
  version: number;
}

// 在 setToken 中
return { 
  tokens: newTokens,
  ui: { ...state.ui, version: state.ui.version + 1 }
};
```

或者更简单的方式：直接在 actions 中触发一个 dummy 状态更新。

## 需要修改的文件

1. `lib/store/vibeStore.ts` - 添加版本号机制强制重新渲染